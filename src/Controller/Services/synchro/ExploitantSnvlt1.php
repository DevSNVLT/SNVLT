<?php

namespace App\Controller\Services\synchro;

use App\Entity\References\Essence;
use App\Entity\References\Exploitant;

class ExploitantSnvlt1
{
    public function __construct(private ConnectionAlt $connectionAlt)
    {
    }

    public function Maj_Exploitant(Exploitant $exploitant, bool $isNew){
        $sql = "";

        if(!$isNew){

       $sql = "UPDATE deif.exploitant
                    SET numero_exploitant=". $exploitant->getNumeroExploitant() . ",
                    raison_sociale_exploitant='". $exploitant->getRaisonSocialeExploitant() . "',  
                    gerant='". $exploitant->getPersonneRessource() . "',     
                    email_responsable='". $exploitant->getEmailPersonneRessource() . "',     
                    mobile_responsable='". $exploitant->getMobilePersonneRessource() . "',     
                    marteau_exploitant='". $exploitant->getMarteauExploitant() . "',     
                    adresse_exploitant='". $exploitant->getAdresseExploitant() . "',     
                    tel_exploitant='". $exploitant->getTelExploitant() . "',     
                    ncc_exploitant='". $exploitant->getNccExploitant(). "',     
                    sigle='". $exploitant->getSigle() . "' WHERE id_exploitant=". $exploitant->getId().";";
        } else {
            $sql = "INSERT INTO deif.exploitant(
                    id_exploitant,
                    numero_exploitant,
                    raison_sociale_exploitant,
                    gerant,
                    email_responsable,
                    mobile_responsable,
                    marteau_exploitant,
                    adresse_exploitant,
                    tel_exploitant,
                    ncc_exploitant,
                    sigle) 
            VALUES (" . $exploitant->getId() . ",
             ". $exploitant->getNumeroExploitant() . ",
             '" . $exploitant->getRaisonSocialeExploitant() . "',
             '" . $exploitant->getPersonneRessource() . "',
             '" . $exploitant->getEmailPersonneRessource() . "',
             '" . $exploitant->getMobilePersonneRessource() . "',
              '" . $exploitant->getMarteauExploitant()  . "', 
            '" . $exploitant->getAdresseExploitant() . "',
             '". $exploitant->getTelExploitant() . "',
             '". $exploitant->getNccExploitant() . "',
              '" . $exploitant->getSigle() ."');";
        }

        $this->connectionAlt->connect($sql);
    }

    public function Delete_Exploitant(Exploitant $exploitant){

            $sql = "DELETE FROM deif.exploitant  WHERE id_exploitant=". $exploitant->getId().";" ;
            $this->connectionAlt->connect($sql);
    }
}